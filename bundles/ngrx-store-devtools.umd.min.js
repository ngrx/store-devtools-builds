!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ngrx/store"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngrx/store-devtools",["exports","@angular/core","@ngrx/store","rxjs","rxjs/operators"],e):e(((t=t||self).ngrx=t.ngrx||{},t.ngrx["store-devtools"]={}),t.ng.core,t.store,t.rxjs,t.rxjs.operators)}(this,(function(exports,core,store,rxjs,operators){"use strict";function DevToolsFeatureOptions(){}var StoreDevtoolsConfig=function(){this.maxAge=!1};var STORE_DEVTOOLS_CONFIG=new core.InjectionToken("@ngrx/devtools Options"),INITIAL_OPTIONS=new core.InjectionToken("@ngrx/devtools Initial Config");function noMonitor(){return null}var DEFAULT_NAME="NgRx Store DevTools";function createConfig(t){var e={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},o="function"==typeof t?t():t,n=!!o.logOnly&&{pause:!0,export:!0,test:!0},r=o.features||n||e.features,i=Object.assign({},e,{features:r},o);if(i.maxAge&&i.maxAge<2)throw new Error("Devtools 'maxAge' cannot be less than 2, got "+i.maxAge);return i}var PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING",PerformAction=function(t,e){if(this.action=t,this.timestamp=e,this.type=PERFORM_ACTION,void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')};var Refresh=function(){this.type=REFRESH};var Reset=function(t){this.timestamp=t,this.type=RESET};var Rollback=function(t){this.timestamp=t,this.type=ROLLBACK};var Commit=function(t){this.timestamp=t,this.type=COMMIT};var Sweep=function(){this.type=SWEEP};var ToggleAction=function(t){this.id=t,this.type=TOGGLE_ACTION};var SetActionsActive=function(t,e,o){void 0===o&&(o=!0),this.start=t,this.end=e,this.active=o,this.type=SET_ACTIONS_ACTIVE};var JumpToState=function(t){this.index=t,this.type=JUMP_TO_STATE};var JumpToAction=function(t){this.actionId=t,this.type=JUMP_TO_ACTION};var ImportState=function(t){this.nextLiftedState=t,this.type=IMPORT_STATE};var LockChanges=function(t){this.status=t,this.type=LOCK_CHANGES};var PauseRecording=function(t){this.status=t,this.type=PAUSE_RECORDING};var __extends=this&&this.__extends||(extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),extendStatics,DevtoolsDispatcher=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.decorators=[{type:core.Injectable}],e}(store.ActionsSubject),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function difference(t,e){return t.filter((function(t){return e.indexOf(t)<0}))}function unliftState(t){var e=t.computedStates,o=t.currentStateIndex;return o>=e.length?e[e.length-1].state:e[o].state}function unliftAction(t){return t.actionsById[t.nextActionId-1]}function liftAction(t){return new PerformAction(t,+Date.now())}function sanitizeActions(t,e){return Object.keys(e).reduce((function(o,n){var r=Number(n);return o[r]=sanitizeAction(t,e[r],r),o}),{})}function sanitizeAction(t,e,o){return __assign(__assign({},e),{action:t(e.action,o)})}function sanitizeStates(t,e){return e.map((function(e,o){return{state:sanitizeState(t,e.state,o),error:e.error}}))}function sanitizeState(t,e,o){return t(e,o)}function shouldFilterActions(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function filterLiftedState(t,e,o,n){var r=[],i={},s=[];return t.stagedActionIds.forEach((function(a,c){var p=t.actionsById[a];p&&(c&&isActionFiltered(t.computedStates[c],p,e,o,n)||(i[a]=p,r.push(a),s.push(t.computedStates[c])))})),__assign(__assign({},t),{stagedActionIds:r,actionsById:i,computedStates:s})}function isActionFiltered(t,e,o,n,r){var i=o&&!o(t,e.action),s=n&&!e.action.type.match(n.map((function(t){return escapeRegExp(t)})).join("|")),a=r&&e.action.type.match(r.map((function(t){return escapeRegExp(t)})).join("|"));return i||s||a}function escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var __assign$1=this&&this.__assign||function(){return(__assign$1=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new core.InjectionToken("Redux Devtools Extension");function ReduxDevtoolsExtensionConnection(){}function ReduxDevtoolsExtensionConfig(){}function ReduxDevtoolsExtension(){}var DevtoolsExtension=function(){function DevtoolsExtension(t,e,o){this.config=e,this.dispatcher=o,this.devtoolsExtension=t,this.createActionStreams()}return DevtoolsExtension.prototype.notify=function(t,e){var o=this;if(this.devtoolsExtension)if(t.type===PERFORM_ACTION){if(e.isLocked||e.isPaused)return;var n=unliftState(e);if(shouldFilterActions(this.config)&&isActionFiltered(n,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;var r=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,n,e.currentStateIndex):n,i=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,t,e.nextActionId):t;this.sendToReduxDevtools((function(){return o.extensionConnection.send(i,r)}))}else{var s=__assign$1(__assign$1({},e),{stagedActionIds:e.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,e.actionsById):e.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,e.computedStates):e.computedStates});this.sendToReduxDevtools((function(){return o.devtoolsExtension.send(null,s,o.getExtensionConfig(o.config))}))}},DevtoolsExtension.prototype.createChangesObservable=function(){var t=this;return this.devtoolsExtension?new rxjs.Observable((function(e){var o=t.devtoolsExtension.connect(t.getExtensionConfig(t.config));return t.extensionConnection=o,o.init(),o.subscribe((function(t){return e.next(t)})),o.unsubscribe})):rxjs.empty()},DevtoolsExtension.prototype.createActionStreams=function(){var t=this,e=this.createChangesObservable().pipe(operators.share()),o=e.pipe(operators.filter((function(t){return t.type===ExtensionActionTypes.START}))),n=e.pipe(operators.filter((function(t){return t.type===ExtensionActionTypes.STOP}))),r=e.pipe(operators.filter((function(t){return t.type===ExtensionActionTypes.DISPATCH})),operators.map((function(e){return t.unwrapAction(e.payload)})),operators.concatMap((function(e){return e.type===IMPORT_STATE?t.dispatcher.pipe(operators.filter((function(t){return t.type===store.UPDATE})),operators.timeout(1e3),operators.debounceTime(1e3),operators.map((function(){return e})),operators.catchError((function(){return rxjs.of(e)})),operators.take(1)):rxjs.of(e)}))),i=e.pipe(operators.filter((function(t){return t.type===ExtensionActionTypes.ACTION})),operators.map((function(e){return t.unwrapAction(e.payload)}))).pipe(operators.takeUntil(n)),s=r.pipe(operators.takeUntil(n));this.start$=o.pipe(operators.takeUntil(n)),this.actions$=this.start$.pipe(operators.switchMap((function(){return i}))),this.liftedActions$=this.start$.pipe(operators.switchMap((function(){return s})))},DevtoolsExtension.prototype.unwrapAction=function(action){return"string"==typeof action?eval("("+action+")"):action},DevtoolsExtension.prototype.getExtensionConfig=function(t){var e={name:t.name,features:t.features,serialize:t.serialize};return!1!==t.maxAge&&(e.maxAge=t.maxAge),e},DevtoolsExtension.prototype.sendToReduxDevtools=function(t){try{t()}catch(t){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",t)}},DevtoolsExtension.decorators=[{type:core.Injectable}],DevtoolsExtension.ctorParameters=function(){return[{type:void 0,decorators:[{type:core.Inject,args:[REDUX_DEVTOOLS_EXTENSION]}]},{type:StoreDevtoolsConfig,decorators:[{type:core.Inject,args:[STORE_DEVTOOLS_CONFIG]}]},{type:DevtoolsDispatcher}]},DevtoolsExtension}();var __assign$2=this&&this.__assign||function(){return(__assign$2=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},__read=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},__spread=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},INIT_ACTION={type:store.INIT},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function ComputedState(){}function LiftedAction(){}function LiftedActions(){}function LiftedState(){}function computeNextEntry(t,e,o,n,r){if(n)return{state:o,error:"Interrupted by an error up the chain"};var i,s=o;try{s=t(o,e)}catch(t){i=t.toString(),r.handleError(t.stack||t)}return{state:s,error:i}}function recomputeStates(t,e,o,n,r,i,s,a,c){if(e>=t.length&&t.length===i.length)return t;for(var p=t.slice(0,e),u=i.length-(c?1:0),f=e;f<u;f++){var d=i[f],l=r[d].action,h=p[f-1],S=h?h.state:n,_=h?h.error:void 0,O=s.indexOf(d)>-1?h:computeNextEntry(o,l,S,_,a);p.push(O)}return c&&p.push(t[t.length-1]),p}function liftInitialState(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(t,e,o,n,r){return void 0===r&&(r={}),function(i){return function(s,a){var c,p=s||e,u=p.monitorState,f=p.actionsById,d=p.nextActionId,l=p.stagedActionIds,h=p.skippedActionIds,S=p.committedState,_=p.currentStateIndex,O=p.computedStates,E=p.isLocked,T=p.isPaused;function x(t){for(var e=t,o=l.slice(1,e+1),n=0;n<o.length;n++){if(O[n+1].error){e=n,o=l.slice(1,e+1);break}delete f[o[n]]}h=h.filter((function(t){return-1===o.indexOf(t)})),l=__spread([0],l.slice(e+1)),S=O[e].state,O=O.slice(e),_=_>e?_-e:0}function I(){f={0:liftAction(INIT_ACTION)},d=1,l=[0],h=[],S=O[_].state,_=0,O=[]}s||(f=Object.create(f));var v=0;switch(a.type){case LOCK_CHANGES:E=a.status,v=1/0;break;case PAUSE_RECORDING:(T=a.status)?(l=__spread(l,[d]),f[d]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),d++,v=l.length-1,O=O.concat(O[O.length-1]),_===l.length-2&&_++,v=1/0):I();break;case RESET:f={0:liftAction(INIT_ACTION)},d=1,l=[0],h=[],S=t,_=0,O=[];break;case COMMIT:I();break;case ROLLBACK:f={0:liftAction(INIT_ACTION)},d=1,l=[0],h=[],_=0,O=[];break;case TOGGLE_ACTION:var A=a.id,g=h.indexOf(A);h=-1===g?__spread([A],h):h.filter((function(t){return t!==A})),v=l.indexOf(A);break;case SET_ACTIONS_ACTIVE:for(var y=a.start,m=a.end,R=a.active,N=[],C=y;C<m;C++)N.push(C);h=R?difference(h,N):__spread(h,N),v=l.indexOf(y);break;case JUMP_TO_STATE:_=a.index,v=1/0;break;case JUMP_TO_ACTION:-1!==(g=l.indexOf(a.actionId))&&(_=g),v=1/0;break;case SWEEP:l=difference(l,h),h=[],_=Math.min(_,l.length-1);break;case PERFORM_ACTION:if(E)return s||e;if(T||s&&isActionFiltered(s.computedStates[_],a,r.predicate,r.actionsSafelist,r.actionsBlocklist)){var D=O[O.length-1];O=__spread(O.slice(0,-1),[computeNextEntry(i,a.action,D.state,D.error,o)]),v=1/0;break}r.maxAge&&l.length===r.maxAge&&x(1),_===l.length-1&&_++;var b=d++;f[b]=a,v=(l=__spread(l,[b])).length-1;break;case IMPORT_STATE:u=(c=a.nextLiftedState).monitorState,f=c.actionsById,d=c.nextActionId,l=c.stagedActionIds,h=c.skippedActionIds,S=c.committedState,_=c.currentStateIndex,O=c.computedStates,E=c.isLocked,T=c.isPaused;break;case store.INIT:v=0,r.maxAge&&l.length>r.maxAge&&(O=recomputeStates(O,v,i,S,f,l,h,o,T),x(l.length-r.maxAge),v=1/0);break;case store.UPDATE:if(O.filter((function(t){return t.error})).length>0)v=0,r.maxAge&&l.length>r.maxAge&&(O=recomputeStates(O,v,i,S,f,l,h,o,T),x(l.length-r.maxAge),v=1/0);else{if(!T&&!E){_===l.length-1&&_++;b=d++;f[b]=new PerformAction(a,+Date.now()),v=(l=__spread(l,[b])).length-1,O=recomputeStates(O,v,i,S,f,l,h,o,T)}O=O.map((function(t){return __assign$2(__assign$2({},t),{state:i(t.state,RECOMPUTE_ACTION)})})),_=l.length-1,r.maxAge&&l.length>r.maxAge&&x(l.length-r.maxAge),v=1/0}break;default:v=1/0}return O=recomputeStates(O,v,i,S,f,l,h,o,T),{monitorState:u=n(u,a),actionsById:f,nextActionId:d,stagedActionIds:l,skippedActionIds:h,committedState:S,currentStateIndex:_,computedStates:O,isLocked:E,isPaused:T}}}}var __read$1=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},StoreDevtools=function(){function t(t,e,o,n,r,i,s,a){var c=this,p=liftInitialState(s,a.monitor),u=liftReducerWith(s,p,i,a.monitor,a),f=rxjs.merge(rxjs.merge(e.asObservable().pipe(operators.skip(1)),n.actions$).pipe(operators.map(liftAction)),t,n.liftedActions$).pipe(operators.observeOn(rxjs.queueScheduler)),d=o.pipe(operators.map(u)),l=new rxjs.ReplaySubject(1),h=f.pipe(operators.withLatestFrom(d),operators.scan((function(t,e){var o=t.state,r=__read$1(e,2),i=r[0],s=(0,r[1])(o,i);return i.type!==PERFORM_ACTION&&shouldFilterActions(a)&&(s=filterLiftedState(s,a.predicate,a.actionsSafelist,a.actionsBlocklist)),n.notify(i,s),{state:s,action:i}}),{state:p,action:null})).subscribe((function(t){var e=t.state,o=t.action;if(l.next(e),o.type===PERFORM_ACTION){var n=o.action;r.next(n)}})),S=n.start$.subscribe((function(){c.refresh()})),_=l.asObservable(),O=_.pipe(operators.map(unliftState));this.extensionStartSubscription=S,this.stateSubscription=h,this.dispatcher=t,this.liftedState=_,this.state=O}return t.prototype.dispatch=function(t){this.dispatcher.next(t)},t.prototype.next=function(t){this.dispatcher.next(t)},t.prototype.error=function(t){},t.prototype.complete=function(){},t.prototype.performAction=function(t){this.dispatch(new PerformAction(t,+Date.now()))},t.prototype.refresh=function(){this.dispatch(new Refresh)},t.prototype.reset=function(){this.dispatch(new Reset(+Date.now()))},t.prototype.rollback=function(){this.dispatch(new Rollback(+Date.now()))},t.prototype.commit=function(){this.dispatch(new Commit(+Date.now()))},t.prototype.sweep=function(){this.dispatch(new Sweep)},t.prototype.toggleAction=function(t){this.dispatch(new ToggleAction(t))},t.prototype.jumpToAction=function(t){this.dispatch(new JumpToAction(t))},t.prototype.jumpToState=function(t){this.dispatch(new JumpToState(t))},t.prototype.importState=function(t){this.dispatch(new ImportState(t))},t.prototype.lockChanges=function(t){this.dispatch(new LockChanges(t))},t.prototype.pauseRecording=function(t){this.dispatch(new PauseRecording(t))},t.decorators=[{type:core.Injectable}],t.ctorParameters=function(){return[{type:DevtoolsDispatcher},{type:store.ActionsSubject},{type:store.ReducerObservable},{type:DevtoolsExtension},{type:store.ScannedActionsSubject},{type:core.ErrorHandler},{type:void 0,decorators:[{type:core.Inject,args:[store.INITIAL_STATE]}]},{type:StoreDevtoolsConfig,decorators:[{type:core.Inject,args:[STORE_DEVTOOLS_CONFIG]}]}]},t}();var IS_EXTENSION_OR_MONITOR_PRESENT=new core.InjectionToken("Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(t,e){return Boolean(t)||e.monitor!==noMonitor}function createReduxDevtoolsExtension(){return"object"==typeof window&&void 0!==window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:null}function createStateObservable(t){return t.state}var StoreDevtoolsModule=function(){function t(){}return t.instrument=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:e},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:store.StateObservable,deps:[StoreDevtools],useFactory:createStateObservable},{provide:store.ReducerManagerDispatcher,useExisting:DevtoolsDispatcher}]}},t.decorators=[{type:core.NgModule,args:[{}]}],t}();exports.INITIAL_OPTIONS=INITIAL_OPTIONS,exports.RECOMPUTE=RECOMPUTE,exports.StoreDevtools=StoreDevtools,exports.StoreDevtoolsConfig=StoreDevtoolsConfig,exports.StoreDevtoolsModule=StoreDevtoolsModule,exports.ɵa=IS_EXTENSION_OR_MONITOR_PRESENT,exports.ɵb=createIsExtensionOrMonitorPresent,exports.ɵc=createReduxDevtoolsExtension,exports.ɵd=createStateObservable,exports.ɵe=STORE_DEVTOOLS_CONFIG,exports.ɵf=noMonitor,exports.ɵg=createConfig,exports.ɵh=REDUX_DEVTOOLS_EXTENSION,exports.ɵi=DevtoolsExtension,exports.ɵj=DevtoolsDispatcher,Object.defineProperty(exports,"__esModule",{value:!0})}));
//# sourceMappingURL=ngrx-store-devtools.umd.min.js.map