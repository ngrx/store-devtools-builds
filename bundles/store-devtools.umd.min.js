/**
 * @license NgRx 6.0.1
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ngrx/store"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngrx/store-devtools",["exports","@angular/core","@ngrx/store","rxjs","rxjs/operators"],e):e((t.ngrx=t.ngrx||{},t.ngrx.storeDevtools={}),t.ng.core,t["@ngrx/store"],t.rxjs,t.rxjs.operators)}(this,function(exports,core,store,rxjs,operators){"use strict";var StoreDevtoolsConfig=function a(){},STORE_DEVTOOLS_CONFIG=new core.InjectionToken("@ngrx/devtools Options"),INITIAL_OPTIONS=new core.InjectionToken("@ngrx/devtools Initial Config"),PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",PerformAction=function b(t,e){if(this.action=t,this.timestamp=e,this.type=PERFORM_ACTION,void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')},Refresh=function e(){this.type=REFRESH},Reset=function f(t){this.timestamp=t,this.type=RESET},Rollback=function h(t){this.timestamp=t,this.type=ROLLBACK},Commit=function j(t){this.timestamp=t,this.type=COMMIT},Sweep=function l(){this.type=SWEEP},ToggleAction=function m(t){this.id=t,this.type=TOGGLE_ACTION},JumpToState=function o(t){this.index=t,this.type=JUMP_TO_STATE},JumpToAction=function q(t){this.actionId=t,this.type=JUMP_TO_ACTION},ImportState=function s(t){this.nextLiftedState=t,this.type=IMPORT_STATE},__assign$1=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function difference(t,e){return t.filter(function(t){return e.indexOf(t)<0})}function unliftState(t){return t.computedStates[t.currentStateIndex].state}function liftAction(t){return new PerformAction(t,+Date.now())}function sanitizeActions(t,e){return Object.keys(e).reduce(function(o,n){var r=Number(n);return o[r]=sanitizeAction(t,e[r],r),o},{})}function sanitizeAction(t,e,o){return __assign$1({},e,{action:t(e.action,o)})}function sanitizeStates(t,e){return e.map(function(e,o){return{state:sanitizeState(t,e.state,o),error:e.error}})}function sanitizeState(t,e,o){return t(e,o)}var __assign=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new core.InjectionToken("Redux Devtools Extension"),DevtoolsExtension=function(){function DevtoolsExtension(t,e){this.config=e,this.instanceId="ngrx-store-"+Date.now(),this.devtoolsExtension=t,this.createActionStreams()}return DevtoolsExtension.prototype.notify=function(t,e){if(this.devtoolsExtension)if(t.type===PERFORM_ACTION){var o=unliftState(e),n=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,o,e.currentStateIndex):o,r=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,t,e.nextActionId):t;this.extensionConnection.send(r,n)}else{var i=__assign({},e,{actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,e.actionsById):e.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,e.computedStates):e.computedStates});this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.instanceId,this.config),this.instanceId)}},DevtoolsExtension.prototype.createChangesObservable=function(){var t=this;return this.devtoolsExtension?new rxjs.Observable(function(e){var o=t.devtoolsExtension.connect(t.getExtensionConfig(t.instanceId,t.config));return t.extensionConnection=o,o.init(),o.subscribe(function(t){return e.next(t)}),o.unsubscribe}):rxjs.empty()},DevtoolsExtension.prototype.createActionStreams=function(){var t=this,e=this.createChangesObservable().pipe(operators.share()),o=e.pipe(operators.filter(function(t){return t.type===ExtensionActionTypes.START})),n=e.pipe(operators.filter(function(t){return t.type===ExtensionActionTypes.STOP})),r=e.pipe(operators.filter(function(t){return t.type===ExtensionActionTypes.DISPATCH}),operators.map(function(e){return t.unwrapAction(e.payload)})),i=e.pipe(operators.filter(function(t){return t.type===ExtensionActionTypes.ACTION}),operators.map(function(e){return t.unwrapAction(e.payload)})).pipe(operators.takeUntil(n)),s=r.pipe(operators.takeUntil(n));this.start$=o.pipe(operators.takeUntil(n)),this.actions$=this.start$.pipe(operators.switchMap(function(){return i})),this.liftedActions$=this.start$.pipe(operators.switchMap(function(){return s}))},DevtoolsExtension.prototype.unwrapAction=function(action){return"string"==typeof action?eval("("+action+")"):action},DevtoolsExtension.prototype.getExtensionConfig=function(t,e){var o={instanceId:t,name:e.name,features:e.features,serialize:e.serialize};return!1!==e.maxAge&&(o.maxAge=e.maxAge),o},DevtoolsExtension.decorators=[{type:core.Injectable}],DevtoolsExtension.ctorParameters=function(){return[{type:void 0,decorators:[{type:core.Inject,args:[REDUX_DEVTOOLS_EXTENSION]}]},{type:StoreDevtoolsConfig,decorators:[{type:core.Inject,args:[STORE_DEVTOOLS_CONFIG]}]}]},DevtoolsExtension}(),__assign$2=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__read$1=function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read$1(arguments[e]));return t},INIT_ACTION={type:store.INIT};function computeNextEntry(t,e,o,n,r){if(n)return{state:o,error:"Interrupted by an error up the chain"};var i,s=o;try{s=t(o,e)}catch(t){i=t.toString(),r.handleError(t.stack||t)}return{state:s,error:i}}function recomputeStates(t,e,o,n,r,i,s,a){if(e>=t.length&&t.length===i.length)return t;for(var c=t.slice(0,e),p=e;p<i.length;p++){var u=i[p],l=r[u].action,f=c[p-1],d=f?f.state:n,_=f?f.error:void 0,S=s.indexOf(u)>-1?f:computeNextEntry(o,l,d,_,a);c.push(S)}return c}function liftInitialState(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[]}}function liftReducerWith(t,e,o,n,r){return void 0===r&&(r={}),function(i){return function(s,a){var c=s||e,p=c.monitorState,u=c.actionsById,l=c.nextActionId,f=c.stagedActionIds,d=c.skippedActionIds,_=c.committedState,S=c.currentStateIndex,O=c.computedStates;function T(t){for(var e=t,o=f.slice(1,e+1),n=0;n<o.length;n++){if(O[n+1].error){o=f.slice(1,(e=n)+1);break}delete u[o[n]]}d=d.filter(function(t){return-1===o.indexOf(t)}),f=__spread([0],f.slice(e+1)),_=O[e].state,O=O.slice(e),S=S>e?S-e:0}s||(u=Object.create(u));var x,h=0;switch(a.type){case RESET:u={0:liftAction(INIT_ACTION)},l=1,f=[0],d=[],_=t,S=0,O=[];break;case COMMIT:u={0:liftAction(INIT_ACTION)},l=1,f=[0],d=[],_=O[S].state,S=0,O=[];break;case ROLLBACK:u={0:liftAction(INIT_ACTION)},l=1,f=[0],d=[],S=0,O=[];break;case TOGGLE_ACTION:var I=a.id,v=d.indexOf(I);d=-1===v?__spread([I],d):d.filter(function(t){return t!==I}),h=f.indexOf(I);break;case SET_ACTIONS_ACTIVE:for(var E=a.start,g=a.end,A=a.active,y=[],m=E;m<g;m++)y.push(m);d=A?difference(d,y):__spread(d,y),h=f.indexOf(E);break;case JUMP_TO_STATE:S=a.index,h=1/0;break;case JUMP_TO_ACTION:-1!==(v=f.indexOf(a.actionId))&&(S=v),h=1/0;break;case SWEEP:f=difference(f,d),d=[],S=Math.min(S,f.length-1);break;case PERFORM_ACTION:r.maxAge&&f.length===r.maxAge&&T(1),S===f.length-1&&S++;var b=l++;u[b]=a,h=(f=__spread(f,[b])).length-1;break;case IMPORT_STATE:p=(x=a.nextLiftedState).monitorState,u=x.actionsById,l=x.nextActionId,f=x.stagedActionIds,d=x.skippedActionIds,_=x.committedState,S=x.currentStateIndex,O=x.computedStates;break;case store.INIT:h=0,r.maxAge&&f.length>r.maxAge&&(O=recomputeStates(O,h,i,_,u,f,d,o),T(f.length-r.maxAge),h=1/0);break;case store.UPDATE:O.filter(function(t){return t.error}).length>0?(h=0,r.maxAge&&f.length>r.maxAge&&(O=recomputeStates(O,h,i,_,u,f,d,o),T(f.length-r.maxAge),h=1/0)):(S===f.length-1&&S++,b=l++,u[b]=new PerformAction(a,+Date.now()),f=__spread(f,[b]),O=(O=recomputeStates(O,h=f.length-1,i,_,u,f,d,o)).map(function(t){return __assign$2({},t,{state:i(t.state,a)})}),S=h,r.maxAge&&f.length>r.maxAge&&T(f.length-r.maxAge),h=1/0);break;default:h=1/0}return O=recomputeStates(O,h,i,_,u,f,d,o),{monitorState:p=n(p,a),actionsById:u,nextActionId:l,stagedActionIds:f,skippedActionIds:d,committedState:_,currentStateIndex:S,computedStates:O}}}}var __extends=(_b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}_b(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),_b,__read=function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},DevtoolsDispatcher=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.decorators=[{type:core.Injectable}],e}(store.ActionsSubject),StoreDevtools=function(){function t(t,e,o,n,r,i,s,a){var c=this,p=liftInitialState(s,a.monitor),u=liftReducerWith(s,p,i,a.monitor,a),l=rxjs.merge(rxjs.merge(e.asObservable().pipe(operators.skip(1)),n.actions$).pipe(operators.map(liftAction)),t,n.liftedActions$).pipe(operators.observeOn(rxjs.queueScheduler)),f=o.pipe(operators.map(u)),d=new rxjs.ReplaySubject(1),_=l.pipe(operators.withLatestFrom(f),operators.scan(function(t,e){var o=t.state,r=__read(e,2),i=r[0],s=(0,r[1])(o,i);return n.notify(i,s),{state:s,action:i}},{state:p,action:null})).subscribe(function(t){var e=t.action;d.next(t.state),e.type===PERFORM_ACTION&&r.next(e.action)}),S=n.start$.subscribe(function(){c.refresh()}),O=d.asObservable(),T=O.pipe(operators.map(unliftState));this.extensionStartSubscription=S,this.stateSubscription=_,this.dispatcher=t,this.liftedState=O,this.state=T}return t.prototype.dispatch=function(t){this.dispatcher.next(t)},t.prototype.next=function(t){this.dispatcher.next(t)},t.prototype.error=function(t){},t.prototype.complete=function(){},t.prototype.performAction=function(t){this.dispatch(new PerformAction(t,+Date.now()))},t.prototype.refresh=function(){this.dispatch(new Refresh)},t.prototype.reset=function(){this.dispatch(new Reset(+Date.now()))},t.prototype.rollback=function(){this.dispatch(new Rollback(+Date.now()))},t.prototype.commit=function(){this.dispatch(new Commit(+Date.now()))},t.prototype.sweep=function(){this.dispatch(new Sweep)},t.prototype.toggleAction=function(t){this.dispatch(new ToggleAction(t))},t.prototype.jumpToAction=function(t){this.dispatch(new JumpToAction(t))},t.prototype.jumpToState=function(t){this.dispatch(new JumpToState(t))},t.prototype.importState=function(t){this.dispatch(new ImportState(t))},t.decorators=[{type:core.Injectable}],t.ctorParameters=function(){return[{type:DevtoolsDispatcher},{type:store.ActionsSubject},{type:store.ReducerObservable},{type:DevtoolsExtension},{type:store.ScannedActionsSubject},{type:core.ErrorHandler},{type:void 0,decorators:[{type:core.Inject,args:[store.INITIAL_STATE]}]},{type:StoreDevtoolsConfig,decorators:[{type:core.Inject,args:[STORE_DEVTOOLS_CONFIG]}]}]},t}(),IS_EXTENSION_OR_MONITOR_PRESENT=new core.InjectionToken("Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(t,e){return Boolean(t)||e.monitor!==noMonitor}function createReduxDevtoolsExtension(){var t="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[t]?window[t]:null}function createStateObservable(t){return t.state}function noMonitor(){return null}var DEFAULT_NAME="NgRx Store DevTools";function createConfig(t){var e={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,features:!1},o="function"==typeof t?t():t,n=Object.assign({},e,{features:o.features||!!o.logOnly&&{pause:!0,export:!0,test:!0}},o);if(n.maxAge&&n.maxAge<2)throw new Error("Devtools 'maxAge' cannot be less than 2, got "+n.maxAge);return n}var StoreDevtoolsModule=function(){function t(){}return t.instrument=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:e},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:store.StateObservable,deps:[StoreDevtools],useFactory:createStateObservable},{provide:store.ReducerManagerDispatcher,useExisting:DevtoolsDispatcher}]}},t.decorators=[{type:core.NgModule,args:[{}]}],t}();exports.ɵngrx_modules_store_devtools_store_devtools_i=INITIAL_OPTIONS,exports.ɵngrx_modules_store_devtools_store_devtools_h=STORE_DEVTOOLS_CONFIG,exports.ɵngrx_modules_store_devtools_store_devtools_g=DevtoolsDispatcher,exports.ɵngrx_modules_store_devtools_store_devtools_k=DevtoolsExtension,exports.ɵngrx_modules_store_devtools_store_devtools_j=REDUX_DEVTOOLS_EXTENSION,exports.ɵngrx_modules_store_devtools_store_devtools_a=IS_EXTENSION_OR_MONITOR_PRESENT,exports.ɵngrx_modules_store_devtools_store_devtools_f=createConfig,exports.ɵngrx_modules_store_devtools_store_devtools_b=createIsExtensionOrMonitorPresent,exports.ɵngrx_modules_store_devtools_store_devtools_c=createReduxDevtoolsExtension,exports.ɵngrx_modules_store_devtools_store_devtools_d=createStateObservable,exports.ɵngrx_modules_store_devtools_store_devtools_e=noMonitor,exports.StoreDevtoolsModule=StoreDevtoolsModule,exports.StoreDevtools=StoreDevtools,exports.StoreDevtoolsConfig=StoreDevtoolsConfig,Object.defineProperty(exports,"__esModule",{value:!0})});