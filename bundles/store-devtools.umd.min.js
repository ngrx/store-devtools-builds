/**
 * @license NgRx 9.0.0
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tslib"),require("@angular/core"),require("@ngrx/store"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngrx/store-devtools",["exports","tslib","@angular/core","@ngrx/store","rxjs","rxjs/operators"],e):e(((t=t||self).ngrx=t.ngrx||{},t.ngrx.storeDevtools={}),t.tslib,t.ng.core,t.ngrx.store,t.rxjs,t.rxjs.operators)}(this,(function(exports,tslib,core,store,rxjs,operators){"use strict";var StoreDevtoolsConfig=function StoreDevtoolsConfig(){this.maxAge=!1},STORE_DEVTOOLS_CONFIG=new core.InjectionToken("@ngrx/devtools Options"),INITIAL_OPTIONS=new core.InjectionToken("@ngrx/devtools Initial Config");function noMonitor(){return null}var DEFAULT_NAME="NgRx Store DevTools";function createConfig(t){var e={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},o="function"==typeof t?t():t,n=Object.assign({},e,{features:o.features||!!o.logOnly&&{pause:!0,export:!0,test:!0}||e.features},o);if(n.maxAge&&n.maxAge<2)throw new Error("Devtools 'maxAge' cannot be less than 2, got "+n.maxAge);return n}var PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING",PerformAction=function PerformAction(t,e){if(this.action=t,this.timestamp=e,this.type=PERFORM_ACTION,void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')},Refresh=function Refresh(){this.type=REFRESH},Reset=function Reset(t){this.timestamp=t,this.type=RESET},Rollback=function Rollback(t){this.timestamp=t,this.type=ROLLBACK},Commit=function Commit(t){this.timestamp=t,this.type=COMMIT},Sweep=function Sweep(){this.type=SWEEP},ToggleAction=function ToggleAction(t){this.id=t,this.type=TOGGLE_ACTION},SetActionsActive=function SetActionsActive(t,e,o){void 0===o&&(o=!0),this.start=t,this.end=e,this.active=o,this.type=SET_ACTIONS_ACTIVE},JumpToState=function JumpToState(t){this.index=t,this.type=JUMP_TO_STATE},JumpToAction=function JumpToAction(t){this.actionId=t,this.type=JUMP_TO_ACTION},ImportState=function ImportState(t){this.nextLiftedState=t,this.type=IMPORT_STATE},LockChanges=function LockChanges(t){this.status=t,this.type=LOCK_CHANGES},PauseRecording=function PauseRecording(t){this.status=t,this.type=PAUSE_RECORDING},DevtoolsDispatcher=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tslib.__extends(e,t),tslib.__decorate([core.Injectable()],e)}(store.ActionsSubject);function difference(t,e){return t.filter((function(t){return e.indexOf(t)<0}))}function unliftState(t){var e=t.computedStates,o=t.currentStateIndex;return o>=e.length?e[e.length-1].state:e[o].state}function unliftAction(t){return t.actionsById[t.nextActionId-1]}function liftAction(t){return new PerformAction(t,+Date.now())}function sanitizeActions(t,e){return Object.keys(e).reduce((function(o,n){var i=Number(n);return o[i]=sanitizeAction(t,e[i],i),o}),{})}function sanitizeAction(t,e,o){return tslib.__assign(tslib.__assign({},e),{action:t(e.action,o)})}function sanitizeStates(t,e){return e.map((function(e,o){return{state:sanitizeState(t,e.state,o),error:e.error}}))}function sanitizeState(t,e,o){return t(e,o)}function shouldFilterActions(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function filterLiftedState(t,e,o,n){var i=[],s={},r=[];return t.stagedActionIds.forEach((function(a,c){var p=t.actionsById[a];p&&(c&&isActionFiltered(t.computedStates[c],p,e,o,n)||(s[a]=p,i.push(a),r.push(t.computedStates[c])))})),tslib.__assign(tslib.__assign({},t),{stagedActionIds:i,actionsById:s,computedStates:r})}function isActionFiltered(t,e,o,n,i){var s=o&&!o(t,e.action),r=n&&!e.action.type.match(n.map((function(t){return escapeRegExp(t)})).join("|")),a=i&&e.action.type.match(i.map((function(t){return escapeRegExp(t)})).join("|"));return s||r||a}function escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new core.InjectionToken("Redux Devtools Extension"),DevtoolsExtension=function(){function DevtoolsExtension(t,e,o){this.config=e,this.dispatcher=o,this.devtoolsExtension=t,this.createActionStreams()}return DevtoolsExtension.prototype.notify=function(t,e){var o=this;if(this.devtoolsExtension)if(t.type===PERFORM_ACTION){if(e.isLocked||e.isPaused)return;var n=unliftState(e);if(shouldFilterActions(this.config)&&isActionFiltered(n,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;var i=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,n,e.currentStateIndex):n,s=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,t,e.nextActionId):t;this.sendToReduxDevtools((function(){return o.extensionConnection.send(s,i)}))}else{var r=tslib.__assign(tslib.__assign({},e),{stagedActionIds:e.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,e.actionsById):e.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,e.computedStates):e.computedStates});this.sendToReduxDevtools((function(){return o.devtoolsExtension.send(null,r,o.getExtensionConfig(o.config))}))}},DevtoolsExtension.prototype.createChangesObservable=function(){var t=this;return this.devtoolsExtension?new rxjs.Observable((function(e){var o=t.devtoolsExtension.connect(t.getExtensionConfig(t.config));return t.extensionConnection=o,o.init(),o.subscribe((function(t){return e.next(t)})),o.unsubscribe})):rxjs.empty()},DevtoolsExtension.prototype.createActionStreams=function(){var t=this,e=this.createChangesObservable().pipe(operators.share()),o=e.pipe(operators.filter((function(t){return t.type===ExtensionActionTypes.START}))),n=e.pipe(operators.filter((function(t){return t.type===ExtensionActionTypes.STOP}))),i=e.pipe(operators.filter((function(t){return t.type===ExtensionActionTypes.DISPATCH})),operators.map((function(e){return t.unwrapAction(e.payload)})),operators.concatMap((function(e){return e.type===IMPORT_STATE?t.dispatcher.pipe(operators.filter((function(t){return t.type===store.UPDATE})),operators.timeout(1e3),operators.debounceTime(1e3),operators.map((function(){return e})),operators.catchError((function(){return rxjs.of(e)})),operators.take(1)):rxjs.of(e)}))),s=e.pipe(operators.filter((function(t){return t.type===ExtensionActionTypes.ACTION})),operators.map((function(e){return t.unwrapAction(e.payload)}))).pipe(operators.takeUntil(n)),r=i.pipe(operators.takeUntil(n));this.start$=o.pipe(operators.takeUntil(n)),this.actions$=this.start$.pipe(operators.switchMap((function(){return s}))),this.liftedActions$=this.start$.pipe(operators.switchMap((function(){return r})))},DevtoolsExtension.prototype.unwrapAction=function(action){return"string"==typeof action?eval("("+action+")"):action},DevtoolsExtension.prototype.getExtensionConfig=function(t){var e={name:t.name,features:t.features,serialize:t.serialize};return!1!==t.maxAge&&(e.maxAge=t.maxAge),e},DevtoolsExtension.prototype.sendToReduxDevtools=function(t){try{t()}catch(t){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",t)}},DevtoolsExtension=tslib.__decorate([core.Injectable(),tslib.__param(0,core.Inject(REDUX_DEVTOOLS_EXTENSION)),tslib.__param(1,core.Inject(STORE_DEVTOOLS_CONFIG)),tslib.__metadata("design:paramtypes",[Object,StoreDevtoolsConfig,DevtoolsDispatcher])],DevtoolsExtension),DevtoolsExtension}(),INIT_ACTION={type:store.INIT},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(t,e,o,n,i){if(n)return{state:o,error:"Interrupted by an error up the chain"};var s,r=o;try{r=t(o,e)}catch(t){s=t.toString(),i.handleError(t.stack||t)}return{state:r,error:s}}function recomputeStates(t,e,o,n,i,s,r,a,c){if(e>=t.length&&t.length===s.length)return t;for(var p=t.slice(0,e),u=s.length-(c?1:0),l=e;l<u;l++){var d=s[l],f=i[d].action,_=p[l-1],S=_?_.state:n,T=_?_.error:void 0,E=r.indexOf(d)>-1?_:computeNextEntry(o,f,S,T,a);p.push(E)}return c&&p.push(t[t.length-1]),p}function liftInitialState(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(t,e,o,n,i){return void 0===i&&(i={}),function(s){return function(r,a){var c,p=r||e,u=p.monitorState,l=p.actionsById,d=p.nextActionId,f=p.stagedActionIds,_=p.skippedActionIds,S=p.committedState,T=p.currentStateIndex,E=p.computedStates,h=p.isLocked,O=p.isPaused;function I(t){for(var e=t,o=f.slice(1,e+1),n=0;n<o.length;n++){if(E[n+1].error){o=f.slice(1,(e=n)+1);break}delete l[o[n]]}_=_.filter((function(t){return-1===o.indexOf(t)})),f=tslib.__spread([0],f.slice(e+1)),S=E[e].state,E=E.slice(e),T=T>e?T-e:0}function A(){l={0:liftAction(INIT_ACTION)},d=1,f=[0],_=[],S=E[T].state,T=0,E=[]}r||(l=Object.create(l));var x=0;switch(a.type){case LOCK_CHANGES:h=a.status,x=1/0;break;case PAUSE_RECORDING:(O=a.status)?(f=tslib.__spread(f,[d]),l[d]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),d++,x=f.length-1,E=E.concat(E[E.length-1]),T===f.length-2&&T++,x=1/0):A();break;case RESET:l={0:liftAction(INIT_ACTION)},d=1,f=[0],_=[],S=t,T=0,E=[];break;case COMMIT:A();break;case ROLLBACK:l={0:liftAction(INIT_ACTION)},d=1,f=[0],_=[],T=0,E=[];break;case TOGGLE_ACTION:var g=a.id,v=_.indexOf(g);_=-1===v?tslib.__spread([g],_):_.filter((function(t){return t!==g})),x=f.indexOf(g);break;case SET_ACTIONS_ACTIVE:for(var m=a.start,b=a.end,R=a.active,y=[],N=m;N<b;N++)y.push(N);_=R?difference(_,y):tslib.__spread(_,y),x=f.indexOf(m);break;case JUMP_TO_STATE:T=a.index,x=1/0;break;case JUMP_TO_ACTION:-1!==(v=f.indexOf(a.actionId))&&(T=v),x=1/0;break;case SWEEP:f=difference(f,_),_=[],T=Math.min(T,f.length-1);break;case PERFORM_ACTION:if(h)return r||e;if(O||r&&isActionFiltered(r.computedStates[T],a,i.predicate,i.actionsSafelist,i.actionsBlocklist)){var C=E[E.length-1];E=tslib.__spread(E.slice(0,-1),[computeNextEntry(s,a.action,C.state,C.error,o)]),x=1/0;break}i.maxAge&&f.length===i.maxAge&&I(1),T===f.length-1&&T++;var D=d++;l[D]=a,x=(f=tslib.__spread(f,[D])).length-1;break;case IMPORT_STATE:u=(c=a.nextLiftedState).monitorState,l=c.actionsById,d=c.nextActionId,f=c.stagedActionIds,_=c.skippedActionIds,S=c.committedState,T=c.currentStateIndex,E=c.computedStates,h=c.isLocked,O=c.isPaused;break;case store.INIT:x=0,i.maxAge&&f.length>i.maxAge&&(E=recomputeStates(E,x,s,S,l,f,_,o,O),I(f.length-i.maxAge),x=1/0);break;case store.UPDATE:E.filter((function(t){return t.error})).length>0?(x=0,i.maxAge&&f.length>i.maxAge&&(E=recomputeStates(E,x,s,S,l,f,_,o,O),I(f.length-i.maxAge),x=1/0)):(O||h||(T===f.length-1&&T++,D=d++,l[D]=new PerformAction(a,+Date.now()),f=tslib.__spread(f,[D]),E=recomputeStates(E,x=f.length-1,s,S,l,f,_,o,O)),E=E.map((function(t){return tslib.__assign(tslib.__assign({},t),{state:s(t.state,RECOMPUTE_ACTION)})})),T=f.length-1,i.maxAge&&f.length>i.maxAge&&I(f.length-i.maxAge),x=1/0);break;default:x=1/0}return E=recomputeStates(E,x,s,S,l,f,_,o,O),{monitorState:u=n(u,a),actionsById:l,nextActionId:d,stagedActionIds:f,skippedActionIds:_,committedState:S,currentStateIndex:T,computedStates:E,isLocked:h,isPaused:O}}}}var StoreDevtools=function(){function t(t,e,o,n,i,s,r,a){var c=this,p=liftInitialState(r,a.monitor),u=liftReducerWith(r,p,s,a.monitor,a),l=rxjs.merge(rxjs.merge(e.asObservable().pipe(operators.skip(1)),n.actions$).pipe(operators.map(liftAction)),t,n.liftedActions$).pipe(operators.observeOn(rxjs.queueScheduler)),d=o.pipe(operators.map(u)),f=new rxjs.ReplaySubject(1),_=l.pipe(operators.withLatestFrom(d),operators.scan((function(t,e){var o=t.state,i=tslib.__read(e,2),s=i[0],r=(0,i[1])(o,s);return s.type!==PERFORM_ACTION&&shouldFilterActions(a)&&(r=filterLiftedState(r,a.predicate,a.actionsSafelist,a.actionsBlocklist)),n.notify(s,r),{state:r,action:s}}),{state:p,action:null})).subscribe((function(t){var e=t.action;f.next(t.state),e.type===PERFORM_ACTION&&i.next(e.action)})),S=n.start$.subscribe((function(){c.refresh()})),T=f.asObservable(),E=T.pipe(operators.map(unliftState));this.extensionStartSubscription=S,this.stateSubscription=_,this.dispatcher=t,this.liftedState=T,this.state=E}return t.prototype.dispatch=function(t){this.dispatcher.next(t)},t.prototype.next=function(t){this.dispatcher.next(t)},t.prototype.error=function(t){},t.prototype.complete=function(){},t.prototype.performAction=function(t){this.dispatch(new PerformAction(t,+Date.now()))},t.prototype.refresh=function(){this.dispatch(new Refresh)},t.prototype.reset=function(){this.dispatch(new Reset(+Date.now()))},t.prototype.rollback=function(){this.dispatch(new Rollback(+Date.now()))},t.prototype.commit=function(){this.dispatch(new Commit(+Date.now()))},t.prototype.sweep=function(){this.dispatch(new Sweep)},t.prototype.toggleAction=function(t){this.dispatch(new ToggleAction(t))},t.prototype.jumpToAction=function(t){this.dispatch(new JumpToAction(t))},t.prototype.jumpToState=function(t){this.dispatch(new JumpToState(t))},t.prototype.importState=function(t){this.dispatch(new ImportState(t))},t.prototype.lockChanges=function(t){this.dispatch(new LockChanges(t))},t.prototype.pauseRecording=function(t){this.dispatch(new PauseRecording(t))},tslib.__decorate([core.Injectable(),tslib.__param(6,core.Inject(store.INITIAL_STATE)),tslib.__param(7,core.Inject(STORE_DEVTOOLS_CONFIG)),tslib.__metadata("design:paramtypes",[DevtoolsDispatcher,store.ActionsSubject,store.ReducerObservable,DevtoolsExtension,store.ScannedActionsSubject,core.ErrorHandler,Object,StoreDevtoolsConfig])],t)}(),IS_EXTENSION_OR_MONITOR_PRESENT=new core.InjectionToken("Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(t,e){return Boolean(t)||e.monitor!==noMonitor}function createReduxDevtoolsExtension(){return"object"==typeof window&&void 0!==window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:null}function createStateObservable(t){return t.state}var StoreDevtoolsModule=function(){function t(){}var e;return e=t,t.instrument=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:t},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:store.StateObservable,deps:[StoreDevtools],useFactory:createStateObservable},{provide:store.ReducerManagerDispatcher,useExisting:DevtoolsDispatcher}]}},e=tslib.__decorate([core.NgModule({})],t)}();exports.INITIAL_OPTIONS=INITIAL_OPTIONS,exports.RECOMPUTE=RECOMPUTE,exports.StoreDevtools=StoreDevtools,exports.StoreDevtoolsConfig=StoreDevtoolsConfig,exports.StoreDevtoolsModule=StoreDevtoolsModule,exports.ɵngrx_modules_store_devtools_store_devtools_a=IS_EXTENSION_OR_MONITOR_PRESENT,exports.ɵngrx_modules_store_devtools_store_devtools_b=createIsExtensionOrMonitorPresent,exports.ɵngrx_modules_store_devtools_store_devtools_c=createReduxDevtoolsExtension,exports.ɵngrx_modules_store_devtools_store_devtools_d=createStateObservable,exports.ɵngrx_modules_store_devtools_store_devtools_e=STORE_DEVTOOLS_CONFIG,exports.ɵngrx_modules_store_devtools_store_devtools_f=noMonitor,exports.ɵngrx_modules_store_devtools_store_devtools_g=createConfig,exports.ɵngrx_modules_store_devtools_store_devtools_h=REDUX_DEVTOOLS_EXTENSION,exports.ɵngrx_modules_store_devtools_store_devtools_i=DevtoolsExtension,exports.ɵngrx_modules_store_devtools_store_devtools_j=DevtoolsDispatcher,Object.defineProperty(exports,"__esModule",{value:!0})}));